<Window x:Class="PublishTool.SftpWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:PublishTool"
        mc:Ignorable="d"
        Title="SftpWindow" Height="800" Width="1200">
    <Window.Resources>
        <local:DirTypeConverter x:Key="DirTypeConverter"/>
        <local:FileSizeConverter x:Key="FileSizeConverter"/>
    </Window.Resources>
    <DockPanel>
        <StackPanel Orientation="Horizontal" DockPanel.Dock="Top" Margin="5">
            <Button Content="返回上级" Click="BtnUp_Click" Margin="0,0,10,0"/>
            <TextBox Name="txtPath" Width="600" Margin="0,0,10,0"/>
            <Button Content="跳转" Click="BtnGo_Click"/>
        </StackPanel>
        <ListView Name="lvFiles" MouseDoubleClick="lvFiles_MouseDoubleClick">
            <ListView.View>
                <GridView>
                    <GridViewColumn Header="名称" Width="350">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <Path Width="18" Height="18" Margin="0,0,6,0"
                                      Fill="{Binding IsDirectory, Converter={StaticResource DirTypeConverter}, ConverterParameter=Brush}"
                                      Data="{Binding IsDirectory, Converter={StaticResource DirTypeConverter}, ConverterParameter=Geometry}"/>
                                    <TextBlock Text="{Binding Name}"/>
                                </StackPanel>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    <GridViewColumn Header="已修改" Width="150" DisplayMemberBinding="{Binding LastWriteTime, StringFormat=yyyy-MM-dd HH:mm}"/>
                    <GridViewColumn Header="文件大小" Width="100">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Size, Converter={StaticResource FileSizeConverter}}"/>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                </GridView>
            </ListView.View>
            <ListView.ContextMenu>
                <ContextMenu>
                    <MenuItem Header="新建文件夹" Click="MenuCreateDir_Click"/>
                    <MenuItem Header="重命名" Click="MenuRename_Click"/>
                    <MenuItem Header="删除" Click="MenuDelete_Click"/>
                    <MenuItem Header="上传文件" Click="MenuUploadFile_Click"/>
                    <MenuItem Header="下载文件" Click="MenuDownloadFile_Click"/>
                </ContextMenu>
            </ListView.ContextMenu>
        </ListView>
    </DockPanel>
</Window>
